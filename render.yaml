services:
  - type: web
    name: riya-ai-companion
    env: node
    plan: starter
    # Use npm run build (not npx vite build); Node 20.x; vite in dependencies
    buildCommand: npm install && npm run build && npm run build:server
    startCommand: NODE_ENV=production PORT=$PORT node dist/server.mjs
    envVars:
      - key: NODE_VERSION
        value: "20"
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      # IMPORTANT: Add these environment variables in Render Dashboard:
      # - DODO_PAYMENTS_API_KEY
      # - DODO_ENV=live_mode
      # - DODO_WEBHOOK_SECRET
      # - DODO_PRODUCT_ID_MONTHLY
      # - DODO_WEBHOOK_URL (your Render URL)
      # - BASE_URL (your Render URL)
      # - PAYMENT_RETURN_URL (your Render URL)
      # - SUPABASE_URL
      # - SUPABASE_SERVICE_ROLE_KEY

